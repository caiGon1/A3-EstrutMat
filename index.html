<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pixel Art 5x5 com Coordenadas Intuitivas</title>
  <style>
    body {
      font-family: "Comic Sans MS", cursive, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 20px;
      background-color: #f0f8ff;
    }

    .hidden {
  display: none !important;
}



    #tela-jogo {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
      width: 100%;
    }

    #conteudo-jogo {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .grid-container {
      display: grid;
      grid-template-columns: 30px repeat(5, 50px);
      grid-template-rows: 30px repeat(5, 50px);
      gap: 4px;
      margin-top: 20px;
    }

    .label {
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      background-color: #ffebcd;
      border-radius: 8px;
      user-select: none;
    }

    .cell {
      width: 50px;
      height: 50px;
      background-color: #dcdcdc;
      border: 2px solid #aaa;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
      border-radius: 8px;
    }

    .cell:hover {
      transform: scale(1.1);
    }

    .painted {
      animation: bouncePaint 0.3s ease forwards;
    }

    @keyframes bouncePaint {
      0% { transform: scale(1); background-color: #ffcc00; }
      50% { transform: scale(1.2); background-color: #ffa500; }
      100% { transform: scale(1); }
    }

    .color-reveal {
      cursor: default;
      transition: background-color 0.5s ease;
    }

    #instructions {
      margin-top: 10px;
      background-color: #ffffcc;
      padding: 10px;
      border-radius: 10px;
      font-size: 18px;
    }

    button {
      margin: 10px;
      padding: 10px 20px;
      background-color: #ff69b4;
      color: white;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    button:hover {
      background-color: #ff1493;
      transform: scale(1.05);
    }

    #mensagem-final {
      font-weight: bold;
      color: green;
      font-size: 20px;
      margin-top: 20px;
      animation: fadeIn 1s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes unpaint {
  0% { transform: scale(1); background-color: black; }
  50% { transform: scale(1.2); background-color: #888; }
  100% { transform: scale(1); background-color: #dcdcdc; }
}

.unpainted {
  animation: unpaint 0.3s ease forwards;
}


    h1, h2 {
      color: #4b0082;
      text-shadow: 1px 1px #fff;
    }
  </style>
</head>
<body>
  <div id="tela-inicial">
    <h1>Escolha um Desenho</h1>
    <button onclick="escolherDesenho('coracao')">Coração</button>
    <button onclick="escolherDesenho('check')">Check</button>
    <button onclick="escolherDesenho('arvore')">Árvore de Natal</button>
  </div>

  <div id="tela-jogo" class="hidden">
  <div id="conteudo-jogo">
    <h2>Pinte nas coordenadas:</h2>
    <div id="instructions"></div>
    <div class="grid-container" id="grid-container"></div>
    <p id="mensagem-final"></p>
  </div>
</div>


  <script>
    const desenhos = {
      arvore: {
        nome: "Árvore de Natal",
        coords: [
          [0, 2], [1,1],
          [1,2], [1,3],
          [2,1], [2,2], [2,3],
          [3,0], [3,1], [3,2], [3,3], [3,4],
          [4,2]
        ],
        cores: {
          "0,2": "yellow", "1,1": "red", "1,2": "green", "1,3": "green",
          "2,1": "green", "2,2": "green", "2,3": "red", "3,0": "green", "3,1": "red",
          "3,2": "green", "3,3": "green", "3,4": "red", "4,2": "orange"
        }
      },
      coracao: {
        nome: "Coração",
        coords: [
          [1, 1], [1, 3],
          [2, 0], [2, 2], [2, 4],
          [3, 1], [3, 3],
          [4, 2]
        ],
        cores: {
          "1,1": "red", "1,3": "red",
          "2,0": "red", "2,2": "red", "2,4": "red",
          "3,1": "red", "3,3": "red",
          "4,2": "red"
        }
      },
      check: {
        nome: "Check",
        coords: [
          [0, 2],
          [1, 2],
          [2, 2],
          [3, 1],
          [4, 0]
        ],
        cores: {
          "0,2": "green",
          "1,2": "green",
          "2,2": "green",
          "3,1": "green",
          "4,0": "green"
        }
      }
    };

    let desenhoAtual = null;
    let celulas = [];

    function escolherDesenho(nome) {
  desenhoAtual = desenhos[nome];
  document.getElementById("tela-inicial").classList.add("hidden");
  document.getElementById("tela-jogo").classList.remove("hidden");
  iniciarJogo();
}


    function iniciarJogo() {
      const container = document.getElementById("grid-container");
      container.innerHTML = '';
      celulas = [];
      document.getElementById("mensagem-final").innerText = '';

      container.appendChild(createLabel(''));
      for (let j = 0; j < 5; j++) {
        container.appendChild(createLabel(j));
      }

      for (let i = 0; i < 5; i++) {
        container.appendChild(createLabel(i));
        celulas[i] = [];
        for (let j = 0; j < 5; j++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.row = i;
          cell.dataset.col = j;
          cell.addEventListener('click', () => pintarCelula(i, j));
          container.appendChild(cell);
          celulas[i][j] = cell;
        }
      }

      const instrucoes = desenhoAtual.coords.map(c => `[${c[0]}, ${c[1]}]`).join(', ');
      document.getElementById('instructions').innerText = instrucoes;
    }

    function createLabel(text) {
      const lbl = document.createElement('div');
      lbl.className = 'label';
      lbl.innerText = text;
      return lbl;
    }

   function pintarCelula(i, j) {
  const cell = celulas[i][j];

  if (cell.classList.contains('painted')) {
    // Despintar com animação
    cell.classList.remove('painted');
    cell.classList.add('unpainted');
    
    // Após a animação, remover classe e resetar cor
    setTimeout(() => {
      cell.classList.remove('unpainted');
      cell.style.backgroundColor = '#dcdcdc';
    }, 300);
    
  } else {
    // Pintar normalmente
    cell.classList.add('painted');
    cell.style.backgroundColor = 'black';
  }

  verificarVitoria();
}




    function verificarVitoria() {
      const coordsCorretas = desenhoAtual.coords.map(c => `${c[0]},${c[1]}`);
      const pintadas = [];

      for (let i = 0; i < 5; i++) {
        for (let j = 0; j < 5; j++) {
          if (celulas[i][j].classList.contains('painted')) {
            pintadas.push(`${i},${j}`);
          }
        }
      }

      if (pintadas.length !== coordsCorretas.length) return;

      for (const p of pintadas) {
        if (!coordsCorretas.includes(p)) return;
      }

      mostrarResultadoFinal();
    }

    function mostrarResultadoFinal() {
      document.getElementById('mensagem-final').innerText = 'Parabéns! Você completou o desenho!';
      for (let i = 0; i < 5; i++) {
        for (let j = 0; j < 5; j++) {
          const key = `${i},${j}`;
          if (desenhoAtual.cores[key]) {
            celulas[i][j].style.backgroundColor = desenhoAtual.cores[key];
            celulas[i][j].classList.add('color-reveal');
          } else {
            celulas[i][j].style.backgroundColor = '#eee';
          }

          // Remove event listener
          const oldCell = celulas[i][j];
          const newCell = oldCell.cloneNode(true);
          oldCell.parentNode.replaceChild(newCell, oldCell);
        }
      }
    }
  </script>
</body>
</html>
